(function(e){function t(t){for(var n,s,u=t[0],c=t[1],i=t[2],p=0,f=[];p<u.length;p++)s=u[p],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&f.push(a[s][0]),a[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(f.length)f.shift()();return o.push.apply(o,i||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,u=1;u<r.length;u++){var c=r[u];0!==a[c]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},o=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/foodmap_frontend/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var i=0;i<u.length;i++)t(u[i]);var l=c;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"1ef6":function(e,t,r){},"39cd":function(e,t,r){},"46b1":function(e,t,r){"use strict";r("39cd")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},o=[],s=r("2877"),u={},c=Object(s["a"])(u,a,o,!1,null,null,null),i=c.exports,l=r("8c4f"),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("Main")],1)},f=[],d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"container-fluid",attrs:{fluid:""}},[r("v-row",[r("Map",{attrs:{restaurants:e.restaurants}}),r("Information",{attrs:{restaurants:e.restaurants}})],1)],1)},m=[],v=r("1da1"),h=(r("96cf"),r("bc3a"));function b(){return y.apply(this,arguments)}function y(){return y=Object(v["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.get("https://foodmap99.herokuapp.com/api/restaurant");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),y.apply(this,arguments)}r("bc3a");var g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-col",{attrs:{cols:"12",sm:"9",md:"9",bg:"9"}},[r("div",{staticClass:"map-box"},[r("div",{ref:"map-root",attrs:{id:"map"}},[r("div",{staticClass:"ol-popup",attrs:{id:"popup"}},[r("a",{staticClass:"ol-popup-closer",attrs:{id:"popup-closer"},on:{click:e.closePopup}}),r("div",{attrs:{id:"popup-content"}})])])])])},w=[],_=(r("d81d"),r("b0c0"),r("5bc0"),r("d0e9")),x=r("5eee"),O=r("a2c7"),j=r("480c"),P=r("3e6b"),S=r("5831"),k=r("4cdf"),M=r("6c77"),E=r("6cbf"),C=r("f403"),L=r("256f"),R=r("0710"),$={name:"Map",props:{restaurants:{type:Array,required:!0}},data:function(){return{map:null,view:null,markerLayer:null,markerSource:null,overlay:null}},methods:{initMap:function(){var e=this,t=document.getElementById("popup"),r=document.getElementById("popup-content");this.overlay=new R["a"]({element:t,autoPan:!0,autoPanAnimation:{duration:250}}),this.view=new O["a"]({center:Object(L["e"])([121.53670561802547,25.04477682002577]),zoom:12}),this.map=new x["a"]({target:this.$refs["map-root"],layers:[new j["a"]({source:new _["a"],opacity:1})],view:this.view}),this.markerSource=new S["a"],this.markerLayer=new P["a"]({source:this.markerSource,style:new M["b"]({image:new E["a"]({anchor:[.5,1],src:"https://i.imgur.com/wXxeCFR.png",scale:.5})})}),this.map.addLayer(this.markerLayer),this.addSellrestaurant(),this.map.on("click",(function(t){var n=e.map.forEachFeatureAtPixel(t.pixel,(function(e){var t=e.values_.geometry.flatCoordinates,r=Object(L["q"])(t,"EPSG:3857","EPSG:4326");return e.reverse_coords={lat:r[1],lng:r[0]},e}));n?(r.innerHTML="<span class='popup-text'>餐廳名字:</span>"+n.values_.name+"<br><span class='popup-text'>餐廳地址:</span>"+n.values_.location+"<br><span class='popup-text'>推薦美食:</span>"+n.values_.food,r.classList.add("popup-text"),e.overlay.setPosition(n.getGeometry().getCoordinates()),e.map.addOverlay(e.overlay)):e.overlay.setPosition(void 0)}))},createSellrestaurant:function(e,t,r,n,a){return new k["a"]({geometry:new C["a"](Object(L["q"])([t,e],"EPSG:4326","EPSG:3857")),name:r,location:n,food:a})},addSellrestaurant:function(){try{for(var e=0;e<this.restaurants.length;e++)this.markerLayer.getSource().addFeature(this.createSellrestaurant(this.restaurants[e].lat,this.restaurants[e].lng,this.restaurants[e].name,this.restaurants[e].location,this.restaurants[e].food))}catch(t){console.log(t)}},closePopup:function(){var e=document.getElementById("popup-closer");return this.overlay.setPosition(void 0),e.blur(),!1}},watch:{restaurants:function(){this.initMap()}}},A=$,G=(r("e310"),Object(s["a"])(A,g,w,!1,null,"085bcc7c",null)),I=G.exports,q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-col",{attrs:{cols:"12",sm:"3",md:"3",bg:"3"}},e._l(e.restaurants,(function(t){return r("v-card",{key:t.id,staticClass:"restaurant-info-card"},[r("h3",[e._v(e._s(t.name))]),r("p",[e._v("餐廳地址:"+e._s(t.location))]),r("p",[e._v("推薦美食:"+e._s(t.food))])])})),1)},T=[],B={name:"Map",props:{restaurants:{type:Array,required:!0}}},F=B,H=(r("46b1"),Object(s["a"])(F,q,T,!1,null,"29975685",null)),J=H.exports,z={name:"Main",components:{Map:I,Information:J},data:function(){return{restaurants:[]}},methods:{getAllRestaurants:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b();case 2:e.restaurants=t.sent;case 3:case"end":return t.stop()}}),t)})))()}},created:function(){this.getAllRestaurants()}},X=z,D=(r("fef6"),Object(s["a"])(X,d,m,!1,null,"cfc39710",null)),K=D.exports,N={name:"Home",components:{Main:K}},Q=N,U=Object(s["a"])(Q,p,f,!1,null,null,null),V=U.exports;n["default"].use(l["a"]);var W=[{path:"/",name:"Home",component:V}],Y=new l["a"]({mode:"history",base:"/foodmap_frontend/",routes:W}),Z=Y,ee=r("ce5b"),te=r.n(ee);r("bf40");n["default"].use(te.a);var re={},ne=new te.a(re);n["default"].config.productionTip=!1,new n["default"]({router:Z,vuetify:ne,render:function(e){return e(i)}}).$mount("#app")},e310:function(e,t,r){"use strict";r("fad1")},fad1:function(e,t,r){},fef6:function(e,t,r){"use strict";r("1ef6")}});
//# sourceMappingURL=app.92c188d6.js.map